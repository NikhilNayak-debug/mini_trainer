[tox]
requires = 
    tox>=4
    tox-uv
env_list = py311, py312

[testenv]
# Use uv for package installation and management
runner = uv-venv-runner
uv_seed = true
deps = 
    pytest
    pytest-cov
    ruff
commands = pytest {posargs}

[testenv:test]
description = Run tests
commands = pytest {posargs}

[testenv:test-verbose]
description = Run tests with verbose output
commands = pytest -v {posargs}

[testenv:test-quick]
description = Run tests until first failure
commands = pytest -x {posargs}

[testenv:test-coverage]
description = Run tests with coverage
commands = pytest --cov=mini_trainer --cov-report=html --cov-report=term {posargs}

[testenv:lint]
description = Run linting with ruff
commands = ruff check .

[testenv:lint-fix]
description = Run linting with ruff and fix issues
commands = ruff check --fix .

[testenv:format]
description = Format code with ruff
commands = ruff format .

[testenv:format-check]
description = Check code formatting with ruff
commands = ruff format --check .

[testenv:py311]
description = Run tests on Python 3.11
base_python = python3.11

[testenv:py312]
description = Run tests on Python 3.12
base_python = python3.12